/* Responsividade e usabilidade mobile para Music Drawing */

/* Layout mobile: sidebar como barra inferior, canvas ocupa o topo */
@media (max-width: 900px) {
    .app-container {
        flex-direction: column !important;
        height: 100vh !important;
        min-height: 100vh;
    }
    aside {
        order: 2;
        width: 100vw !important;
        min-width: 0;
        max-width: 100vw;
        height: auto;
        border-right: none;
        border-top: 1px solid #eee;
        background: var(--bg-secondary, #fafafa);
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-around;
        align-items: center;
        position: fixed;
        bottom: 0;
        left: 0;
        z-index: 999;
        padding: 6px 2px;
        box-shadow: 0 -2px 10px 0 rgba(0,0,0,0.08);
    }
    main#canvas-wrapper {
        order: 1;
        width: 100vw !important;
        height: calc(100vh - 66px) !important;
        padding: 0 !important;
        margin-bottom: 66px !important;
        min-height: 250px;
        max-height: 100vh;
    }
    #main-canvas-area, #canvas-container {
        width: 100vw !important;
        max-width: 100vw !important;
        height: 100% !important;
        overflow-x: auto;
        touch-action: pan-x pan-y;
    }
    #drawingCanvas {
        max-width: 100vw !important;
        width: 100vw !important;
        height: 60vh !important;
        min-height: 200px;
        display: block;
        margin: auto;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 1px 8px 0 rgba(0,0,0,0.08);
    }
    .sidebar-section {
        width: 48vw;
        min-width: 120px;
        margin: 2px 0;
        padding: 2px 0;
        flex: none;
    }
    /* Espaço para sliders e botões ficarem maiores */
    input[type="range"], .tool-btn, .timbre-btn, .sidebar-section button {
        min-width: 44px;
        min-height: 44px;
        font-size: 1.13em;
        margin: 4px;
    }
    .sidebar-section h2 {
        font-size: 1rem;
        margin-bottom: 2px;
        text-align: center;
    }
}

/* Melhorias para modo paisagem */
@media (max-width: 900px) and (orientation: landscape) {
    #drawingCanvas {
        height: 70vh !important;
        min-height: 120px;
    }
    .sidebar-section {
        width: 30vw;
        min-width: 80px;
    }
}

/* Ajuste para o botão de menu mobile (opcional, se adicionar um menu flutuante) */
#mobileMenuBtn {
    display: none;
}
@media (max-width: 900px) {
    #mobileMenuBtn {
        display: block;
        position: fixed;
        z-index: 1200;
        top: 10px;
        right: 10px;
    }
}

/* Torna botões e sliders mais acessíveis ao toque */
input[type="range"] {
    touch-action: pan-x pan-y;
    -webkit-tap-highlight-color: transparent;
}

/* Ajusta o playhead para mobile */
#playhead {
    width: 3px;
    background: #eb3b65;
    border-radius: 2px;
    opacity: 0.8;
}

/* Melhora rolagem horizontal do canvas no mobile */
#main-canvas-area {
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
}
#canvas-container {
    scroll-snap-align: center;
}

/* Garante contraste e visibilidade dos controles */
aside, .sidebar-section, #main-canvas-area, #canvas-container {
    background: var(--bg-secondary, #f9f9fa);
}

/* Pequenos ajustes de usabilidade para botões */
.tool-btn, .timbre-btn {
    border-radius: 10px !important;
    background: #f3f3f3;
    transition: background 0.2s;
}
.tool-btn.active, .timbre-btn.active {
    background: #eb3b65;
    color: #fff;
}